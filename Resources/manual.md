## 多屏幕分辨率图片裁剪工具使用说明

[TOC]



### 1. 引言

#### 1.1 编写目的

编写本使用手册的上的是充分叙述本软件所能实现的功能及其运行环境，以便使用者了解本软件的使用范围和使用方法，并为软件的维护和更新提供必要的信息。

#### 1.2 项目背景

在实际的移动端开发项目中，常常需要使用多屏幕、多分辨率的图片来适配不同尺寸的手机，这无形中增加了UI设计师的工作量，绘制的效果图需要根据不同分辨率逐张导出。若项目设计图越多，可想而知，在导出不同分辨率所花费的时间将成倍增长。“多屏幕分辨率图片裁剪工具”即为解决此问题而开发的，使用该软件后，UI设计师仅需要导出最大分辨率的图片就可以自动生成其它分辨率的图片，大大的节省了在图片裁剪上花费的时间。

#### 1.3 术语定义

| 序号 | 缩略语 | 说明/定义                          |
| ---- | ------ | ---------------------------------- |
| 1    | Swing  | Java编程语言的图形化界面开发工具包 |
| 2    | GUI    | 图形化界面                         |
| 3    | 递归   | 逐层向内进行遍历                   |
| 4    | Jar    | Java打包后可执行程序               |

#### 1.4 参考资料

* 《码出高效：Java开发手册》电子工业出版社 杨冠宝，高海慧编著；
* 《Java从入门到精通》清华大学出版社 明日科技编著；
* 《Java Swing图形界面开发与案例详解》 清华大学出版社 王鹏，何昀峰编著；

### 2. 运行环境

#### 2.1 硬件

* CPU 600MHz以上；
* 内存 512M以上； 
* 硬盘可用空间500M以上； 
* 监视器 1024*768或更高分辨率；

#### 2.2 支持软件

本软件支持具有Java环境的所有操作系统，Java版本要求在Java1.6及以上。

### 3. 使用说明

当前以macOS Mojave操作系统为例进行使用说明，其它操作系统使用大同小异。

#### 3.1 安装运行

将**多屏幕分辨率图片裁剪工具.jar**文件复制至硬件储存目录，右键使用“Java Launcher.app”方式打开，如图3.1_1所示，进入至如图3.1_2所示页面表示安装运行成功。

![图3.1_1](http://njcwking.oss-cn-hangzhou.aliyuncs.com/markdown/2018-11-15-033016.png "图3.1_1")

![图3.1_2](http://njcwking.oss-cn-hangzhou.aliyuncs.com/markdown/2018-11-15-033832.png "图3.1_2")

#### 3.2 设置

在裁剪页面点击“更多选项”->“设置”进入到设置页面，如图3.2_1所示，设置中可配置裁剪是否递归、覆盖、后缀名、容差等参数，并且可自定义裁剪图片的尺寸大小及相关名称属性。

![图3.2_1](http://njcwking.oss-cn-hangzhou.aliyuncs.com/markdown/2018-11-15-034255.png "图3.2_1")

##### 3.2.1递归文件夹

若图片文件夹中还包括子文件夹，且勾选了“递归文件夹”选项，在使用裁剪功能时会将子文件夹中的图片也保持相应的目录结构进行裁剪，当然文件夹层次越多，执行所花费的时间也就越长，所以推荐目录结构层次在0~3层之间，避免太多层次导致多余的资源消耗。

##### 3.2.2 文件覆盖

勾选该选项后，若裁剪过程中生成的图片与文件夹中已有的图片重名，程序将直接进行覆盖，这将会丢失已有的文件。未勾选则会生成一个以"_x"（x为数字）结尾作为文件名保存，如“image_1.png”。

##### 3.2.3 添加后缀名

该功能多数情况下是为iPhone移动端图片裁剪提供服务，由于iPhone采用.imageset文件夹和config.json进行多屏幕适配，同名文件无法放到imageset文件夹，所以通过“@2x”和“@3x”来进行区分，所以该功能能够在文件名后面添加指定的后缀来标识同一图片所属不同分辨率。

##### 3.2.4 容差像素

由于程序是通过宽度对原图片进行等比例缩放，所有对于整屏图片难免会出现小数的情况，此时程序会对小数进行取整，所以可能会出现若干个像素的计算偏差。此容差像素指图片缩放允许的最大像素差距，若在该容差范围之内，则直接使用预期的尺寸进行缩放。如果容差值过大，图片将会变形，所以建议容差值尽量控制在0~10之间。

例如：1440x2560等比例缩放成iPhone6尺寸对应的分辨率会变成960x1333，而iPhone6需要的分辨率是960x1334，所以这里的像素偏差有1个像素。通过设置容差像素，强制将图片缩放成960x1334的分辨率。

##### 3.2.5 尺寸配置

软件本身默认有hdpi、xhdpi、xxhdpi、xxxhdpi、iPhone4,4s等11项尺寸配置，每份配置代表着不同的屏幕分辨率、文件夹名、应用图标大小、文件后缀。软件提供对不同屏幕分辨率的管理功能，使用者可自行添加、删除、修改配置内容以生成指定条件的图片。

具体的配置项可见下图4.2.5_1

![图3.2.5_1](http://njcwking.oss-cn-hangzhou.aliyuncs.com/markdown/2018-11-15-053634.png "图3.2.5_1")

##### 3.2.6恢复默认值

软件会内置一份配置信息表，如果程序遇到未知错误或配置混乱的情况，可通过“恢复默认值”将软件的各项配置进行重置，保证软件的正常运行。

默认设置如下：

* 递归文件夹
* 相同名称覆盖
* 缩放容差像素：1px
* 不自动添加文件名后缀
* hdpi、xhdpi、xxhdpi、xxxhdpi、iPhone4,4s等11项默认尺寸配置

##### 3.2.7 保存

在设置中除恢复默认值外，其它配置的改变都需要点击“保存”按钮进行保存。

#### 3.3 版本检查

程序启动后会进行网络通信获取最新版本信息，然后与本地软件版本进行比较，若有发布新的版本则会在左上角“更多选项”右侧显示小红圆点，并在菜单栏中显示最新版本（如图3.3_1所示），点击最新版本后选择更新可跳转至指定页面进行下载（图3.3_2）。
![图3.3_1](http://njcwking.oss-cn-hangzhou.aliyuncs.com/markdown/2018-11-15-054252.png "图3.3_1")

![图3.3_2](http://njcwking.oss-cn-hangzhou.aliyuncs.com/markdown/2018-11-15-054322.png "图3.3_2")

#### 3.4 裁剪图片

##### 3.4.1 图片路径

点击“选择目录”选择文件目录或手动将文件夹拖拽到图片路径的输入框中即可，禁止选择非合法的文件目录。如图3.4.1_1所示：

![图3.4.1_1](http://njcwking.oss-cn-hangzhou.aliyuncs.com/markdown/2018-11-15-060222.png "图3.4.1_1")

##### 3.4.2 输出路径

输出路径即图片处理完成后保存的目录，选择目录的步骤与3.4.1中图片路径一致。需要注意的是避免与路径路径一致，若出现相同文件名仅设置为“相同名称名覆盖”选项则会覆盖源文件。

##### 3.4.3 图标名称

此处定义图标名称，在程序进行裁剪处理时会对指定的图标名称进行特殊处理。由于应用程序图标并不是进行等比例缩放，所以会根据配置尺寸中的图标尺寸进行缩放。

##### 3.4.4 设计尺寸

设计尺寸指的是原设计稿的分辨率，程序会以设计尺寸作为基准去生成其它分辨率的图片。设计尺寸越准确，生成的分辨率图片也越接近于预期。例如设计稿分辨率为“1440x2560”，这表示的是名称为“xxxhdpi”所代表的分辨率，此处就下拉选择“xxxhdpi”。

##### 3.4.5 裁剪尺寸

裁剪尺寸即为我们需要生成的分辨率图片集合，不同的人根据不同的需求选择不同的尺寸分辨率，最终会根据选择的名称转化成对应的分辨率等比例生成图片文件。

##### 3.4.6 开始裁剪

配置图片路径、输出路径、图标名称、设计尺寸和需要裁剪的尺寸后，点击“开始裁剪”后裁剪程序开始在后台运行，Swing GUI的弹出框中可以查看当前裁剪的整体进度和当前裁剪的文件日志（图3.4.6_1）。

![图3.4.6_1](http://njcwking.oss-cn-hangzhou.aliyuncs.com/markdown/2018-11-15-061748.png "图3.4.6_1")

等待裁剪完成后，我们能在输出路径下看到生成的所有文件夹及图片文件（如图3.4.6_2）,当然在裁剪图片的过程中我们也能点击“取消任务”取消当前裁图任务。

![图3.4.6_2](http://njcwking.oss-cn-hangzhou.aliyuncs.com/markdown/2018-11-15-062135.png "图3.4.6_2")